{"version":3,"sources":["../../src/util/field.js"],"names":["Field","constructor","descr","isPoint","p","x","y","isValidArrayOf","arr","num","validator_callback","Array","isArray","length","v","Error","parkingZone","parkingZoneDirection","boxes","boxColors","Color","hasOwnProperty","cubeColors"],"mappings":"AAAA;;;;;;;AAEA;;;;AAEe,MAAMA,KAAN,CAAY;AAEvBC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,aAASC,OAAT,CAAiBC,CAAjB,EAAoB;AAChB,aAAO,OAAOA,CAAC,CAACC,CAAT,KAAe,QAAf,IAA2B,OAAOD,CAAC,CAACE,CAAT,KAAe,QAAjD;AACH;;AAED,aAASC,cAAT,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,kBAAlC,EAAsD;AAClD,UAAG,CAACC,KAAK,CAACC,OAAN,CAAcJ,GAAd,CAAD,IAAuBA,GAAG,CAACK,MAAJ,KAAeJ,GAAzC,EAA8C,OAAO,KAAP;;AAC9C,WAAI,IAAIK,CAAR,IAAaN,GAAb,EAAkB;AACd,YAAG,CAACE,kBAAkB,CAACI,CAAD,CAAtB,EAA2B,OAAO,KAAP;AAC9B;;AACD,aAAO,IAAP;AACH;;AAED,QAAG,OAAOZ,KAAP,KAAiB,WAAjB,IAAgCA,KAAK,KAAK,IAA7C,EAAmD,MAAMa,KAAK,CAAC,wCAAD,CAAX;;AAEnD,QAAGR,cAAc,CAACL,KAAK,CAACc,WAAP,EAAoB,CAApB,EAAuBb,OAAvB,CAAjB,EAAkD;AAAE;AAEhD,WAAKa,WAAL,GAAmBd,KAAK,CAACc,WAAzB;AAEH,KAJD,MAIO;AACH,YAAMD,KAAK,CAAC,mFAAmFb,KAAK,CAACc,WAA1F,CAAX;AACH;;AAED,QAAG,OAAOd,KAAK,CAACe,oBAAb,KAAsC,QAAtC,IAAkDd,OAAO,CAACD,KAAK,CAACe,oBAAP,CAA5D,EAA0F;AACtF,WAAKA,oBAAL,GAA4Bf,KAAK,CAACe,oBAAlC;AACH,KAFD,MAEO;AACH,YAAMF,KAAK,CAAC,6EAA6Eb,KAAK,CAACe,oBAApF,CAAX;AACH;;AAED,QAAGV,cAAc,CAACL,KAAK,CAACgB,KAAP,EAAc,CAAd,EAAiBf,OAAjB,CAAjB,EAA4C;AAAE;AAC1C,WAAKe,KAAL,GAAahB,KAAK,CAACgB,KAAnB;AAEH,KAHD,MAGO;AACH,YAAMH,KAAK,CAAC,6EAA6Eb,KAAK,CAACgB,KAApF,CAAX;AACH;;AAED,QAAGX,cAAc,CAACL,KAAK,CAACiB,SAAP,EAAkB,CAAlB,EAAqBL,CAAC,IAAI,OAAOM,eAAMC,cAAN,CAAqBP,CAArB,CAAjC,CAAjB,EAA4E;AACxE,WAAKK,SAAL,GAAiBjB,KAAK,CAACiB,SAAvB;AAEH,KAHD,MAGO;AACH,YAAMJ,KAAK,CAAC,kGAAkGb,KAAK,CAACiB,SAAzG,CAAX;AACH;;AAED,QAAGZ,cAAc,CAACL,KAAK,CAACoB,UAAP,EAAmB,CAAnB,EAAsBR,CAAC,IAAI,OAAOM,eAAMC,cAAN,CAAqBP,CAArB,CAAlC,CAAjB,EAA6E;AACzE,WAAKQ,UAAL,GAAkBpB,KAAK,CAACoB,UAAxB;AAEH,KAHD,MAGO;AACH,YAAMP,KAAK,CAAC,mGAAmGb,KAAK,CAACoB,UAA1G,CAAX;AACH;AACJ;;AAnDsB","sourcesContent":["'use strict';\n\nimport Color from './color';\n\nexport default class Field {\n\n    constructor(descr) {\n        function isPoint(p) {\n            return typeof p.x === 'number' && typeof p.y === 'number';\n        }\n\n        function isValidArrayOf(arr, num, validator_callback) {\n            if(!Array.isArray(arr) || arr.length !== num) return false;\n            for(let v of arr) {\n                if(!validator_callback(v)) return false;\n            }\n            return true;\n        }\n\n        if(typeof descr === 'undefined' || descr === null) throw Error(\"Field description is undefined or null\");\n\n        if(isValidArrayOf(descr.parkingZone, 4, isPoint)) { // all elements are points\n\n            this.parkingZone = descr.parkingZone;\n\n        } else {\n            throw Error(\"'parkingZone' field of the description should be an array of four points; Got \" + descr.parkingZone);\n        }\n\n        if(typeof descr.parkingZoneDirection === \"object\" && isPoint(descr.parkingZoneDirection)) {\n            this.parkingZoneDirection = descr.parkingZoneDirection;\n        } else {\n            throw Error(\"'parkingZoneDirection' field of the description should be an point; Got \" + descr.parkingZoneDirection);\n        }\n\n        if(isValidArrayOf(descr.boxes, 5, isPoint)) { // all elements are points\n            this.boxes = descr.boxes;\n\n        } else {\n            throw Error(\"'boxes' field of the description should be an array of five points; Got \" + descr.boxes);\n        }\n\n        if(isValidArrayOf(descr.boxColors, 5, v => typeof Color.hasOwnProperty(v))) {\n            this.boxColors = descr.boxColors;\n\n        } else {\n            throw Error(\"'boxColors' field of the description should be an array of five strings denoting colors; Got \" + descr.boxColors);\n        }\n\n        if(isValidArrayOf(descr.cubeColors, 5, v => typeof Color.hasOwnProperty(v))) {\n            this.cubeColors = descr.cubeColors;\n\n        } else {\n            throw Error(\"'cubeColors' field of the description should be an array of five strings denoting colors; Got \" + descr.cubeColors);\n        }\n    }\n\n\n}\n"],"file":"field.js"}